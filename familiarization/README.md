# Ознакомление с инструментом modex и исследование его возможностей

## Заметки

1. `makefile` для сборки не позволяет собрать `modex` - [make install broken · Issue #13 · nimble-code/Modex](https://github.com/nimble-code/Modex/issues/13)
2. пример из мануала не выдает ошибок на этапе верификации - [Question about "A Simple Threads Example (threads.c)" · Issue #6 · nimble-code/Modex](https://github.com/nimble-code/Modex/issues/6). Исправлено добавлением файла `threads.prx`:
```
%X -x
```
данная директива указывает инструменту извлечь модель из всех функций в коде, а
не только из функции, чье название совпадает с именем файла (extract all fcts as active proctypes).

## Отчет о проделанной работе

Дабы разобраться с новым для себя инструментом логично первым делом было зайти
на его официальный сайт [spinroot.com/modex](https://spinroot.com/modex/)
в поиска установщика, документации или исходных кодов. На этом сайте и были
найдены ссылки на исходные коды инструмента `modex` ([github.com/nimble-code/Modex](https://github.com/nimble-code/Modex/))
и зависимого к нему инструмента `spin` ([github.com/nimble-code/Spin/](https://github.com/nimble-code/Spin/)).

При попытке сборки данного инструмента с помощью системы сборки `make` была
обнаружена ошибка, воспрепятствующая сборке. Она была локально устранена, а
владелец репозитория с исходным кодом были уведомлены о этом. Таким образом,
нужные инструменты были установлены и готовы к использованию.

На официальном сайте также была ссылка на руководство, которое и было использовано
для ознакомления с инструментом `modex`, и, что более важно для данной
работы, для исследования его ограничений, т.е. для каких проектов на языке Си он
может применяться: каких масштабов (число строк), с каким интерфейсом он должен
взаимодействовать (`Windows API`; системные вызовы, предоставляемые ядром Linux)
и т.п.

Из руководства получилось выделить одно из самых важных ограничений `modex` &mdash;
ограниченное число распазнаваемых способов создания новых потоков и процессов.
Зная это, было сделано предположение о том, какие манипуляции с кодом реализаций
сетевых протоколов необходимо будет совершить, чтобы успешно извлечь спецификацию
из кода. А именно либо указать инструменту какие конкретно функции использует
наш проект для создания новых потоков/процессов, либо заменить названия,
используемых в проекте, функций на те, которые `modex` способен распознать.

Решение данной проблемы было найдено также в руководстве &mdash; для каждого
проекта требуется написание файла с указаниями по извлечению спецификации из
кода, к которым относятся __таблицы поиска (lookup table &mdash; LUT)__,
инструктирующие инструмент о том, какие дополнительные переменные следует
объявить, на какие заглушки нужно заменить те или иные функции и т.д.

Также с целью разобраться с инструментом по ходу изучения руководства были
предприняты попытки запустить, предложенные автором примеры, которые провалились,
ввиду возможной несовместимости с новыми версиями компиляторов и других
инструментов.

По результатам данного этапа были сделаны выводы о том, что инструмент `modex`
достаточно гибок и позволяет настроить порядок извлечения модели из исходного
кода под конкретный проект, однако использовать его на современных системах и
больших проектах следует с большим вниманием.

## Источники

1. [Modex 2.8 User Guide](https://spinroot.com/modex/MANUAL.html)
2. [Spin Model Checker, The: Primer and Reference Manual](https://www.cin.ufpe.br/~acm/esd/intranet/spinPrimer.pdf)
