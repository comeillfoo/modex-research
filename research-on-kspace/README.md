# Исследование возможности утилиты modex к извлечению модели из примеров

## Notes. Заметки

TODO

## Report. Отчет о проделанной работе

Аналогично при исследовании извлечения модели из проекта `netcat` для
обеспечения воспроизводимости результатов был составлен `Makefile`. Ввиду того,
что ядро `Linux` большой и комплексный проект, то и `Makefile` к нему стал
намного сложнее, так как чтобы правильно предобработать исходные файлы модуля
`wireguard` требовалось сэмулировать сборку самого ядра: сгенерировать
платформозависимые заголовочные файлы, определить опции ядра, а также заставить
`modex` игнорировать стандартные пути к заголовным файлам (`/usr/include` и т.п.).

При попытке извлечь модель, используя заголовочные файлы для архитектуры
`x86/amd64`, было замечено, что `modex` не умеет обрабатывать ассемблерные
вставки, используемые, например, при реализации атомарных типов ядра; ключевые
слова `typeof` и `_Generic`, часто используемые в коде ядра для организации
типонезависимых функций и макросов. Не поддерживает суффикс `LL` для
целочисленных литералов. А также считает некорректными большую часть конструкций
из расширений компилятора `GCC`: вложенные функции, оператор-выражение
(позволяет использовать как выражение блоки из операторов, где последний
оператор указывает возвращаемое значение), структуры без полей и т.д.

Все неподдерживаемые конструкции, ввиду сложности их замены опциями
препроцессинга были вручную заменены в исходном коде ядра на заглушки и значения
по умолчанию.
